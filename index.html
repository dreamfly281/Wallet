<!DOCTYPE html> 
<html lang="en">
	<head>
		<title>DNA Wallet</title>
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" media="screen">
		<link rel="stylesheet" href="css/style.css" media="screen">
	</head>
	<body>
		<div id="wrap">
			<!-- Fixed navbar -->
			<div id="header" class="navbar navbar-default " role="navigation">
					<div class="container">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a href="#home" class="navbar-brand" data-toggle="tab"> <img src="images/logo.png" style="height:45px;margin-top:-5px" @click="logout"></a>
						</div>
						<div class="collapse navbar-collapse" v-if="walletOpen">
							<ul class="nav navbar-nav">
									<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">
											<span class="glyphicon glyphicon-plus"></span> New<b class="caret"></b>
										</a>
										 <ul class="dropdown-menu">
											<li><a href="#newAddress" data-toggle="tab">New Address</a></li>
											<li class="divider"></li>
											<li><a href="#newTransaction" data-toggle="tab">Transaction</a></li>
										</ul>
									</li>
									<li><a href="#openWallet" data-toggle="tab"><span class="glyphicon glyphicon-briefcase"></span> Wallet </a></li>
									<li><a href="#settings" data-toggle="tab"><span class="glyphicon glyphicon-cog"></span> Setting</a></li>
									<li><a href="#about" data-toggle="tab"><span class="glyphicon glyphicon-info-sign"></span> About</a></li>
							</ul>
						</div>
					</div>
			</div>

			<div id="content" class="container">
					<div class="tab-content">
						<div class="tab-pane tab-content active" id="home">
							<div class="row">
								<div class="col-md-12">
									<h2>DNA <small>Welcome to the DNA</small></h2>
								</div>
							</div>
							<div class="jumbotron">
								<h1> DNA Wallet!</h1>
								<p>Take control of your DNA asset!</p>
								<p><a class="btn btn-primary btn-lg " href="#createWallet" data-toggle="tab" role="button">Create Wallet</a></p>
								<p><a class="btn btn-primary btn-lg " href="#openWallet" data-toggle="tab" role="button">Open Wallet</a></p>
							</div>
						</div>

						<div class="tab-pane tab-content" id="createWallet">
							<form @submit.prevent="validateBeforeSubmit()">
								<h3>Create Wallet &nbsp; <small>(~/.wallet/wallet.dat)</small></h3>
								<br>
								<div class="input-group">
									<div class="input-group-addon">
										Enter Password
									</div>

									<div class="input-fields">
										<input type="password" class="form-control" placeholder="Password" v-model="password1">
										<input type="password" class="form-control" placeholder="Password, Again" v-model="password2">
									</div>
								</div>

								<div class="alert alert-danger" v-if="password2 != password1">
									<p>unmatched password</p>
								</div>
								<br>
								<button type="submit" class="btn btn-primary">
									Create
								</button>
							</form>
						</div>

						<div class="tab-pane tab-content" id="openWallet">
							<div v-if="!walletOpen">
								<h3>Open Wallet &nbsp;<small>(~/.wallet/wallet.dat)</small></h3>
								<br>
								<form class="form-signin" @submit.prevent="openWalletFile">
									<div class="input-group">
										<div class="input-group-addon">
											Enter Password
										</div>
										<div class="input-fields">
											<input type="password" class="form-control" placeholder="Password" required v-model="walletPassword">
										</div>
									</div>
									<br>
									<button class="btn btn-primary" type="submit">Open</button>
								</form>
							</div>
							<div v-else>
								<h2> Wallet <small>your assets</small></h2>
								<hr>
								<ul class="nav nav-tabs">
									<li class="active"><a href="#account" data-toggle="tab">Account</a></li>
									<li><a href="#transaction" data-toggle="tab">Transaction</a></li>
								</ul>

								<div class="tab-content">
									<div class="tab-pane fade in active" id="account">
										<br>
										<table class="table table-striped table-hover">
											<thead>
											<tr>
												<th>Address</th>
												<th v-if="showAsset">Asset</th>
												<th v-if="showAsset">Value</th>
											</tr>
											</thead>
											<tbody>
											<tr>
												<td v-text="address"></td>
												<td v-if="showAsset">
													<li v-for="asset in assets">
														{{asset.id}}
													</li>
												</td>
												<td v-if="showAsset">
													<li v-for="asset in assets">
														{{asset.value}}
													</li>
												</td>
											</tr>
											</tbody>
										</table>
										<button class="btn btn-primary" type="submit" data-toggle="tab" @click="searchAssets" v-text="assetButton">{{assetButton}}</button>
									</div>

									<div class="tab-pane fade" id="transaction">
										<br>
											<table class="table table-striped table-hover">
												<thead>
												<tr>
													<th>Transaction ID</th>
													<th>Transaction Type</th>
												</tr>
												</thead>
												<tbody>
												<tr>
													<td>
														<li v-for="txn in transactions">
															{{txn.id}}
														</li>
													</td>
													<td>
														<li v-for="txn in transactions">
															{{txn.type}}
														</li>
													</td>
												</tr>
												</tbody>
											</table>
										<button class="btn btn-primary" type="submit" data-toggle="tab" @click="showTransactions"> Refresh </button>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-pane tab-content" id="newAddress">
							<h2>New Address <small>create a new address</small></h2>
							<input type="button" class="btn btn-primary" value="Generate">
							<br>
						</div>

						<div class="tab-pane tab-content" id="newTransaction">
							<h2>Transaction <small>Create a new transaction</small></h2>
							<hr>
							<b>Making Transaction</b>
							<br>
							<ul class="nav nav-tabs">
								<li class="active"><a href="#regTx" data-toggle="tab">Regist</a></li>
								<li><a href="#issueTx" data-toggle="tab">Issue</a></li>
								<li><a href="#transferTx" data-toggle="tab">Transfer</a></li>
							</ul>

							<br>
							<div class="tab-content">
								<div class="tab-pane fade in active" id="regTx">
									<p>Regist a new asset on DNA chain.</p>
									<div class="row">
										<div class="col-xs-3">
											<label>Asset Name</label>
										</div>
										<div class="col-xs-3">
											<label>Amount</label>
										</div>
									</div>

									<div class="row inputs">
										<div class="col-xs-3">
											<input type="text" class="form-control" placeholder="DNA-Asset" v-model="assetName">
										</div>
										<div class="col-xs-3">
											<input type="text" class="form-control" placeholder="0" v-model="assetValue">
										</div>
									</div>

									<br><br>
									<p><a class="btn btn-primary" href="#broadcastTx" data-toggle="tab" role="button" @click="regTransaction">Create Transaction</a></p>
								</div>

								<div class="tab-pane fade" id="issueTx">
									<p>Enter the details of asset you wish to issue.</p>
									<div class="row">
										<div class="col-xs-6">
											<label> Asset ID:</label>
										</div>
										<div class="col-xs-2">
											<label>Amount</label>
										</div>
										<div class="col-xs-4">
											<label>To</label>
										</div>
									</div>

									<div class="row inputs">
										<div class="col-xs-6">
											<input type="text" class="form-control" placeholder="which asset you want to issue" v-model="assetid">
										</div>
										<div class="col-xs-2">
											<input type="text" class="form-control" placeholder="0" v-model="amount">
										</div>
										<div class="col-xs-4">
											<input type="text" class="form-control" placeholder="to whom" v-model="to">
										</div>
									</div>

									<br><br>
									<p><a class="btn btn-primary" href="#broadcastTx" data-toggle="tab" role="button" @click="issueTransaction">Create Transaction</a></p>
								</div>

								<div class="tab-pane fade" id="transferTx">
									<p>Enter the details of asset you wish to transfer.</p>
									<div class="row">
										<div class="col-xs-6">
											<label> Asset ID:</label>
										</div>
										<div class="col-xs-2">
											<label>Amount</label>
										</div>
										<div class="col-xs-4">
											<label>To</label>
										</div>
									</div>

									<div id="inputs">
										<div class="row inputs">
											<div class="col-xs-6">
												<input type="text" class="form-control" placeholder="which asset you want to transfer" v-model="assetid">
											</div>
											<div class="col-xs-2">
												<input type="text" class="form-control" placeholder="0" v-model="amount">
											</div>
											<div class="col-xs-4">
												<input type="text" class="form-control" placeholder="to whom" v-model="to">
											</div>
										</div>
									</div>
									<br><br>
									<p><a class="btn btn-primary" href="#broadcastTx" data-toggle="tab" role="button" @click="transferTransaction">Create Transaction</a></p>
								</div>
							</div>
						</div>

						<div class="tab-pane tab-content" id="broadcastTx">
							<h2>Send Transaction <small>into the DNA network</small></h2>
							<p>Your raw transaction encoded in hex: </p>
							<textarea class="form-control" style="height:125px" placeholder="Raw Transaction in HEX" v-model="rawTxn"></textarea>
							<br>
							<input type="button" value="Send Transaction" class="btn btn-primary" @click="broadcastRawTxn">
							<br>
						</div>

						<div class="tab-pane tab-content" id="about">
							<h2>About <small>open source DNA wallet</small></h2>
						</div>

						<div class="tab-pane tab-content" id="settings">
							<h2>Settings</h2>
							<div class="row">
								<div class="col-md-12">
									<b>Network</b>: <br>
									<p class="text-muted">Select which blockchain network you'd like to connect.</p>
									<select class="form-control">
										<option value="dna_mainnet">DNA (mainnet)</option>
									</select>
								</div>
							</div>
							<hr>
							<div class="row">
								<div class="col-md-12">
									<b>Unspent outputs</b>: <br>
									<p class="text-muted">Select the network you wish to retreive your unspent outputs from.</p>
									<select class="form-control" v-model="UtxoServer">
										<option v-for="server in servers" v-bind:value="server.address">
											{{ server.name }}
										</option>
									</select>
								</div>
							</div>
						</div>
					</div>
			</div>
			<div id="notice">
				<wallet-notice v-bind:type="type" v-bind:message="message" v-bind:show="show"> </wallet-notice>
			</div>
		</div>

		<template id="alert">
			<div class="alert alert-dismissible text-center fade in" v-bind:class="type" role="alert" v-if="show">
				<!--<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
				{{message}}
			</div>
		</template>

		<div id="footer">
			<div class="container text-right">
				<p class="text-muted">Copyright © 2017 DNAproject.org All rights Reserved</p>
			</div>
		</div>

		<script type="text/javascript" src="node_modules/jquery/jquery.min.js"></script>
		<script type="text/javascript" src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="node_modules/vue/dist/vue.min.js"></script>
		<script type="text/javascript" src="js/wallet.js"></script>
		<script type="text/javascript" src="js/config.js"></script>
		<script type="text/javascript" src="js/rpc.js"></script>
		<script type="text/javascript" src="js/transaction.js"></script>
		<script type="text/javascript" src="js/notice.js"></script>
		<script type="text/javascript" src="js/validation.js"></script>
	</body>
</html>

