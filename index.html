<!DOCTYPE html> 
<html lang="en">
	<head>
		<title>DNA Wallet</title>
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" media="screen">
		<link rel="stylesheet" href="css/style.css" media="screen">
	</head>
	<body>
		<div id="wrap">
			<!-- Fixed navbar -->
			<div id="header" class="navbar navbar-default " role="navigation">
					<div class="container">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a href="#home" class="navbar-brand" data-toggle="tab"> <img src="images/logo.png" style="height:45px;margin-top:-5px" @click="logout"></a>
						</div>
						<div class="collapse navbar-collapse" v-if="walletOpen">
							<ul class="nav navbar-nav">
									<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">
											<span class="glyphicon glyphicon-plus"></span> New<b class="caret"></b>
										</a>
										 <ul class="dropdown-menu">
											<li><a href="#newAddress" data-toggle="tab">New Address</a></li>
											<li class="divider"></li>
											<li><a href="#newTransaction" data-toggle="tab">Transaction</a></li>
										</ul>
									</li>
									<li><a href="#openWallet" data-toggle="tab"><span class="glyphicon glyphicon-briefcase"></span> Wallet </a></li>
									<li><a href="#settings" data-toggle="tab"><span class="glyphicon glyphicon-cog"></span> Setting</a></li>
									<li><a href="#about" data-toggle="tab"><span class="glyphicon glyphicon-info-sign"></span> About</a></li>
							</ul>
						</div>
					</div>
			</div>

			<div id="content" class="container">
					<div class="tab-content">
						<div class="tab-pane tab-content active" id="home">
							<div class="row">
								<div class="col-md-12">
									<h2>DNA <small>Welcome to the DNA</small></h2>
								</div>
							</div>
							<div class="jumbotron text-center">
								<a href="#recoverWallet" data-toggle="tab"><span class="glyphicon glyphicon-wrench pull-right"></span></a>
								<h1> DNA Wallet </h1>
								<p>Take control of your DNA asset!</p>
								<div class="row">
									<div class="col-lg-4"></div>
									<div class="col-lg-2">
										<a class="btn btn-primary btn-group-justified" href="#createWallet" data-toggle="tab" role="button">Create Wallet</a>
									</div>
									<div class="col-lg-2">
										<a class="btn btn-primary btn-group-justified" href="#openWallet" data-toggle="tab" role="button">Open Wallet</a>
									</div>
									<div class="col-lg-4"></div>
								</div>
								<br>
							</div>
						</div>

						<div style="text-align: center" class="tab-pane tab-content" id="createWallet">
							<h3>Create Wallet &nbsp; <small>(~/.wallet/wallet.dat)</small></h3>
							<hr>
							<br><br><br><br><br><br>
							<form @submit.prevent="validateBeforeSubmit">
								<div class="row">
									<div class="col-lg-4"></div>
									<div class="col-lg-4">
										<div class="input-group">
											<span class="input-group-addon">
												Enter Password
											</span>
											<input type="password" class="form-control" placeholder="password" v-model="password1" required>
											<input type="password" class="form-control" placeholder="password, again!" v-model="password2" required>
										</div>
										<div class="alert alert-danger" v-if="password2 != password1">
											<p>unmatched password</p>
										</div>
									</div>
									<div class="col-lg-4"></div>
								</div>
								<br>
								<div class="row">
									<div class="col-lg-4"></div>
									<div class="col-lg-4">
										<button class="btn btn-primary btn-group-justified" type="submit"> Create </button>
									</div>
									<div class=" col-lg-4"></div>
								</div>
							</form>
						</div>

						<div class="tab-pane tab-content" id="openWallet">
							<div style="text-align: center" v-if="!walletOpen">
								<h3>Open Wallet &nbsp;<small>(~/.wallet/wallet.dat)</small></h3>
								<hr>
								<br><br><br><br><br><br>
								<form form-signin @submit.prevent="openWalletFile">
									<div class="row">
										<div class="col-lg-4"></div>
										<div class="col-lg-4">
											<div class="input-group">
												<span class="input-group-addon">
													Enter Password
												</span>
												<input type="password" class="form-control" placeholder="password" v-model="walletPassword" required>
											</div>
										</div>
										<div class="col-lg-4"></div>
									</div>
									<br>
									<div class="row">
										<div class="col-lg-4"></div>
										<div class="col-lg-4">
											<button class="btn btn-primary btn-group-justified" type="submit">Open</button>
										</div>
										<div class=" col-lg-4"></div>
									</div>
								</form>
							</div>
							<div v-else>
								<h2> Wallet <small> Manage your digital assets</small></h2>
								<hr>
								<br>
								<ul class="nav nav-tabs">
									<li class="active"><a href="#account" data-toggle="tab"><strong>Account</strong></a></li>
									<li><a href="#transaction" data-toggle="tab"><strong>Transaction</strong></a></li>
								</ul>

								<div class="tab-content">
									<div class="tab-pane fade in active" id="account">
										<br>
										<table class="table table-striped table-hover">
											<thead>
											<tr>
												<th> Address
													&nbsp
													<span v-if="showAsset" class="glyphicon glyphicon-eye-open" @click="showAsset=!showAsset"></span>
													<span v-else class="glyphicon glyphicon-eye-close" @click="showAsset=!showAsset"></span>
												</th>
												<th v-if="showAsset">Asset</th>
												<th v-if="showAsset">Value</th>
											</tr>
											</thead>
											<tbody>
											<tr>
												<td class="fixedfont">
													{{address}}
													<button class="btn btn-xs btn-primary" data-toggle="modal" data-target="#dialog" @click="showKeys">keys</button>
												</td>
												<td class="fixedfont" v-if="showAsset">
													<li v-for="asset in assets">
														{{asset.id}}
													</li>
												</td>
												<td class="fixedfont" v-if="showAsset">
													<li v-for="asset in assets">
														{{asset.value}}
													</li>
												</td>
											</tr>
											</tbody>
										</table>
									</div>

									<div class="tab-pane fade" id="transaction">
										<br>
											<table class="table table-striped table-hover">
												<thead>
												<tr>
													<th>Transaction ID</th>
													<th>Transaction Type</th>
												</tr>
												</thead>
												<tbody>
													<tr>
														<td>
															<li v-for="txn in transactions">
																<span class="fixedfont" data-toggle="modal" data-target="#dialog" @click="showDetailedTxn(txn.id)">{{txn.id}}</span>
																&nbsp;
																<button class="btn btn-xs btn-primary" v-clipboard:copy="txn.id">Copy</button>
															</li>
														</td>
														<td>
															<li v-for="txn in transactions">
																<span class="fixedfont"> {{txn.type}} </span>
															</li>
														</td>
													</tr>
												</tbody>
											</table>
									</div>
								</div>
							</div>
						</div>

						<div style="text-align: center" class="tab-pane tab-content" id="recoverWallet">
							<h3> Wallet Recovery </h3>
							<hr>
							<br><br><br><br>
							<form form-signin @submit.prevent="recover">
								<div class="row">
									<div class="col-lg-2"></div>
									<div class="col-lg-8">
										<div class="alert alert-warning">
											<p><strong>NOTE: </strong> A new wallet will be recovered to your home directory.</p>
										</div>
										<div class="input-group">
												<span class="input-group-addon">
													Enter Private Key
												</span>
											<input type="text" class="form-control" placeholder="private key in hex format" v-model="privateKey" required>
										</div>
									</div>
									<div class="col-lg-2"></div>
								</div>
								<br>
								<div class="row">
									<div class="col-lg-2"></div>
									<div class="col-lg-8">
										<div class="input-group">
											<span class="input-group-addon">
												Enter &nbsp Password
											</span>
											<input type="password" class="form-control" placeholder="password" v-model="password1" required>
											<input type="password" class="form-control" placeholder="password, again!" v-model="password2" required>
										</div>
										<div class="alert alert-danger" v-if="password2 != password1">
											<p>unmatched password</p>
										</div>
									</div>
									<div class="col-lg-2"></div>
								</div>
								<br>
								<div class="row">
									<div class="col-lg-2"></div>
									<div class="col-lg-8">
										<button class="btn btn-primary btn-group-justified" type="submit">Recover</button>
									</div>
									<div class=" col-lg-2"></div>
								</div>
							</form>
						</div>

						<div class="tab-pane tab-content" id="newAddress">
							<h2>New Address <small>create a new address</small></h2>
							<input type="button" class="btn btn-primary" value="Generate">
							<br>
						</div>

						<div class="tab-pane tab-content" id="newTransaction">
							<h2>Transaction <small>Create a new transaction</small></h2>
							<hr>
							<br>
							<ul class="nav nav-tabs">
								<li class="active"><a href="#regTx" data-toggle="tab"><strong>Registration</strong></a></li>
								<li><a href="#issueTx" data-toggle="tab"><strong>Issuance</strong></a></li>
								<li><a href="#transferTx" data-toggle="tab"><strong>Transfer</strong></a></li>
							</ul>

							<br>
							<div class="tab-content">
								<div class="tab-pane fade in active" id="regTx">
									<p>Regist a new asset on DNA chain.</p>
									<div class="row">
										<div class="col-xs-3">
											<label>Asset Name</label>
										</div>
										<div class="col-xs-3">
											<label>Amount</label>
										</div>
									</div>

									<div class="row inputs">
										<div class="col-xs-3">
											<input type="text" class="form-control" placeholder="DNA-Asset" v-model="assetName">
										</div>
										<div class="col-xs-3">
											<input type="text" class="form-control" placeholder="0" v-model="assetValue">
										</div>
									</div>

									<br><br>
									<p><a class="btn btn-primary" href="#broadcastTx" data-toggle="tab" role="button" @click="regTransaction">Create Transaction</a></p>
								</div>

								<div class="tab-pane fade" id="issueTx">
									<p>Enter the details of asset you wish to issue.</p>
									<div class="row">
										<div class="col-xs-6">
											<label> Asset ID:</label>
										</div>
										<div class="col-xs-2">
											<label>Amount</label>
										</div>
										<div class="col-xs-4">
											<label>To</label>
										</div>
									</div>

									<div class="row inputs">
										<div class="col-xs-6">
											<input type="text" class="form-control" placeholder="which asset you want to issue" v-model="assetid">
										</div>
										<div class="col-xs-2">
											<input type="text" class="form-control" placeholder="0" v-model="amount">
										</div>
										<div class="col-xs-4">
											<input type="text" class="form-control" placeholder="to whom" v-model="to">
										</div>
									</div>

									<br><br>
									<p><a class="btn btn-primary" href="#broadcastTx" data-toggle="tab" role="button" @click="issueTransaction">Create Transaction</a></p>
								</div>

								<div class="tab-pane fade" id="transferTx">
									<p>Enter the details of asset you wish to transfer.</p>
									<div class="row">
										<div class="col-xs-6">
											<label> Asset ID:</label>
										</div>
										<div class="col-xs-2">
											<label>Amount</label>
										</div>
										<div class="col-xs-4">
											<label>To</label>
										</div>
									</div>

									<div id="inputs">
										<div class="row inputs">
											<div class="col-xs-6">
												<input type="text" class="form-control" placeholder="which asset you want to transfer" v-model="assetid">
											</div>
											<div class="col-xs-2">
												<input type="text" class="form-control" placeholder="0" v-model="amount">
											</div>
											<div class="col-xs-4">
												<input type="text" class="form-control" placeholder="to whom" v-model="to">
											</div>
										</div>
									</div>
									<br><br>
									<p><a class="btn btn-primary" href="#broadcastTx" data-toggle="tab" role="button" @click="transferTransaction">Create Transaction</a></p>
								</div>
							</div>
						</div>

						<div class="tab-pane tab-content" id="broadcastTx">
							<h2>Send Transaction <small>into the DNA network</small></h2>
							<p>Your raw transaction encoded in hex: </p>
							<textarea class="form-control" style="height:125px" placeholder="Raw Transaction in HEX" v-model="rawTxn"></textarea>
							<br>
							<input type="button" value="Send Transaction" class="btn btn-primary" @click="broadcastRawTxn">
							<br>
						</div>

						<div class="tab-pane tab-content" id="about">
							<h2>About <small>open source DNA wallet</small></h2>
						</div>

						<div class="tab-pane tab-content" id="settings">
							<h2>Settings</h2>
							<div class="row">
								<div class="col-md-12">
									<b>Network</b>: <br>
									<p class="text-muted">Select which blockchain network you'd like to connect.</p>
									<select class="form-control">
										<option value="dna_mainnet">DNA (mainnet)</option>
									</select>
								</div>
							</div>
							<hr>
							<div class="row">
								<div class="col-md-12">
									<b>Unspent outputs</b>: <br>
									<p class="text-muted">Select the network you wish to retreive your unspent outputs from.</p>
									<select class="form-control" v-model="UtxoServer" @change="changeConfig">
										<option v-for="server in servers" v-bind:value="server.address">
											{{ server.name }}
										</option>
									</select>
								</div>
							</div>
						</div>
					</div>
			</div>

			<div id="state">
				<wallet-state v-bind:type="type" v-bind:message="message" v-bind:show="show"> </wallet-state>
			</div>
		</div>

		<!--popup dialog-->
		<div id="dialog" class="modal fade"tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog" style="height: auto; max-height: 80%">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title"> {{ title }} </h4>
					</div>
					<pre style="font-size: 10px; width:auto; height: auto; max-height: 60%;"> {{ message }} </pre>
					<div class="modal-footer">
						<button class="btn btn-primary" data-dismiss="modal" @click="Clear"> Close </button>
					</div>
				</div>
			</div>
		</div>

		<!--show state-->
		<template id="alert">
			<div class="alert alert-dismissible text-center fade in" v-bind:class="type" role="alert" v-if="show">
				{{message}}
			</div>
		</template>

		<div id="footer">
			<div class="container text-right">
				<p class="text-muted">Copyright © 2017 DNAproject.org All rights Reserved</p>
			</div>
		</div>

		<script type="text/javascript" src="node_modules/jquery/jquery.min.js"></script>
		<script type="text/javascript" src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="node_modules/vue/dist/vue.min.js"></script>
		<script type="text/javascript" src="node_modules/vue-clipboard2/dist/vue-clipboard.min.js"></script>
		<script type="text/javascript" src="js/wallet.js"></script>
		<script type="text/javascript" src="js/config.js"></script>
		<script type="text/javascript" src="js/rpc.js"></script>
		<script type="text/javascript" src="js/transaction.js"></script>
		<script type="text/javascript" src="js/state.js"></script>
		<script type="text/javascript" src="js/validation.js"></script>
		<script type="text/javascript" src="js/dialog.js"></script>
	</body>
</html>

